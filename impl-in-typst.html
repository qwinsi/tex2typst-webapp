<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.8.1/github-markdown-light.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" crossorigin="anonymous"></script>
  <title>Implementing LaTeX macros unsupported by Typst</title>
  <style>
    /**
     * https://github.com/sindresorhus/github-markdown-css
     */
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    }

    /* Center images */
    img {
      display: block;
      margin: auto;
    }

    /* Hide figcaption for images. e.g. "abc" in [abc](image.png) */
    figcaption[aria-hidden="true"] {
      display: none;
    }
  </style>
</head>

<body>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const renderAreas = document.querySelectorAll('span.math.display');
  for(const renderArea of renderAreas) {
    const latexCode = renderArea.textContent;
    katex.render(latexCode, renderArea, {
      displayMode: true,
      throwOnError: false,
    });
  }
});
</script>

<nav style="display: flex; justify-content: space-between; padding: 0.8em;">
  <a href="." target="_blank">Homepage</a>
  <a href="https://github.com/qwinsi/tex2typst-webapp" target="_blank">Source on Github</a>
</nav>

<article class="markdown-body">
<h1 id="implementing-latex-macros-unsupported-by-typst">Implementing
LaTeX macros unsupported by Typst</h1>
<h2 id="background">Background</h2>
<p>There is not always a Typst equivalent for every LaTeX macro. This
document provides a guide on how to implement unsupported LaTeX macros
in Typst.</p>
<h2 id="the-mathscr-macro">The <code>\mathscr</code> macro</h2>
<p>LaTeX: <code>\mathscr</code></p>
<p>Implementation in Typst <a href="#fn1" class="footnote-ref"
id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<pre><code>#let scr(it) = text(
  features: (&quot;ss01&quot;,),
  box($cal(it)$),
)</code></pre>
<p>Usage example:</p>
<pre><code>$
y = scr(A) x
$</code></pre>
<h2 id="the-latex-and-tex-macro">The <code>\LaTeX</code> and
<code>\TeX</code> macro</h2>
<p>LaTeX: <code>\LaTeX</code> and <code>\TeX</code></p>
<p>Implementation in Typst <a href="#fn2" class="footnote-ref"
id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<pre><code>#let TeX = context {
  set text(font: &quot;New Computer Modern&quot;)
  let e = measure(&quot;E&quot;)
  let T = &quot;T&quot;
  let E = text(1em, baseline: e.height * 0.31, &quot;E&quot;)
  let X = &quot;X&quot;
  box(T + h(-0.15em) + E + h(-0.125em) + X)
}

#let LaTeX = context {
  set text(font: &quot;New Computer Modern&quot;)
  let a-size = 0.66em
  let l = measure(&quot;L&quot;)
  let a = measure(text(a-size, &quot;A&quot;))
  let L = &quot;L&quot;
  let A = box(scale(x: 105%, text(a-size, baseline: a.height - l.height, &quot;A&quot;)))
  box(L + h(-a.width * 0.67) + A + h(-a.width * 0.25) + TeX)
}</code></pre>
<p>Usage example:</p>
<pre><code>You can use #LaTeX in text environments.
You can use $#LaTeX$ in math environments as well.</code></pre>
<h2 id="using-the-op-function-to-define-custom-operators">Using the
<code>op</code> function to define custom operators</h2>
<p>For example, if you want to define a custom operator
<code>\myopr</code>.</p>
<p>LaTeX: <code>\newcommand{\myopr}{\operatorname{myopr}}</code></p>
<p>Equivalent in Typst:</p>
<pre><code>#let myopr = op(&quot;myopr&quot;);</code></pre>
<p>Usage example:</p>
<pre><code>$
y = myopr x
$</code></pre>
<h2 id="a-vertical-bar-for-evaluation">A vertical bar for
evaluation</h2>
<p>It’s common to use a vertical bar to denote the evaluation of a
function at a point. e.g.</p>
<p><span class="math display">
f(x) \bigg\rvert_{x = x_0}
</span></p>
<p>➣ LaTeX:</p>
<pre><code>f(x) \bigg\rvert_{x = x_0}</code></pre>
<p>Where <code>\bigg\rvert</code> may be replaced with
<code>\bigg\vert</code>, <code>\bigg|</code> etc.</p>
<p>➣ Walkaround in Typst:</p>
<pre><code>f(x) lr(| vec(delim: #none, , , x = x_0))</code></pre>
<p>Also it’s common to use a vertical bar to denote the deference of
function values at two points, especially when calculating definite
integrals. e.g. <a href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a></p>
<p><span class="math display">
F(x) \bigg\rvert_{a}^{b}
</span></p>
<p>➣ LaTeX:</p>
<pre><code>F(x) \bigg\rvert_{a}^{b}</code></pre>
<p>Where <code>\bigg\rvert</code> may be replaced with
<code>\bigg\vert</code> , <code>\bigg|</code> etc.</p>
<p>➣ Walkaround in Typst:</p>
<pre><code>F(x) lr(| vec(delim: #none, b, , a))</code></pre>
<h2 id="the-cancelto-macro">The <code>\cancelto</code> macro</h2>
<p><code>\cancelto{value}{expression}</code> is a LaTeX command provided
by the <code>cancel</code> package. It is used to place an arrow through
an expression and annotate it with a value to which the expression is be
evaluated.</p>
<figure>
<img src="cancelto-example.svg" alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>➣ LaTeX:</p>
<pre><code>\cancelto{0}{\frac{\partial^2 Q}{\partial r^2}}</code></pre>
<p>➣ Implementation in Typst (adapted from <a href="#fn4"
class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>
):</p>
<pre><code>#let cancelto(to, body) = {
  let max(a, b) = if a &gt; b { a } else { b };
  context {
    let m = measure(body)
    let (w, h) = (m.width, m.height * 2)
    let arrow = rotate(-55deg, math.stretch(sym.arrow.r, size: max(h*1.8, w*2.0)))
    set place(center + horizon)
    body
    place(dx: -w * 0.5, dy: -h * 0.1, arrow)
    place(dx: w * 0.3, dy: -h * 1.1, to)
  }
}</code></pre>
<h2 id="references-and-credits">References and Credits</h2>
<p>The following resources were used to create this document:</p>
<section class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><code>\mathscr</code>: <a
href="https://typst.app/docs/reference/math/variants#functions-cal">Variants
Functions – Typst Documentation</a><a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p><code>\TeX</code> and
<code>\LaTeX</code>: <a
href="https://github.com/typst/typst/discussions/1732#discussioncomment-6566999">How
do I insert the <code>LaTeX</code> symbol in Typst? · typst/typst ·
Discussion #1732</a><a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p><code>\bigg\rvert</code> for
evaluation: <a
href="https://tex.stackexchange.com/questions/552807/math-symbol-vertical-bar-for-evaluated-at-limits-are-not-apart-enough">Math
symbol: Vertical bar for ‘’evaluated at …’’ Limits are not apart enough
- TeX - LaTeX Stack Exchange</a><a href="#fnref3" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p><code>\cancelto</code>: <a
href="https://forum.typst.app/t/is-there-an-equivalent-to-latexs-cancelto-in-typst/536">Is
there an equivalent to Latex’s in Typst? - Questions - Typst Forum</a><a
href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</article>
</body>
</html>
